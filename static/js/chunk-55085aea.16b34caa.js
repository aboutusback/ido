(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55085aea"],{"2ff2":function(e,t,n){"use strict";n("938c")},"5e7e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAmZJREFUSEvFl7trVFEQh79hzUJioTFEG1GIEv8AFXwhWqggKiKYrIWgjeILFSsFMWKhjfhKEMQidquFCBbBpIhFsk3+gki0EBE0aiLoigkyMpt7l5vrvffcXTe7pz0zv+885szMEVIMVW0C9gC7gI1AB7DUc50G3gFjwBDwSkRmXbKSZKCqJn4BOA20u8S8+S9AH3BXRGxRkSMWrKo5cwZWpASGzT7ZokUkH+X/D1hVM8AD4FSVwLDbQ+CciPwJTswDe9BnwKEaQX2Z50BXEB4G207P1hjqy/WJSFm7DFbVbiDyPmq4kJyIPDW9EtiL3nFgeQ0hUVKfgXUW7T64B7jmgn7/BfkxKLyF99/mrFe3wba1cHg9LGl2KZTmr4tIj6hqFvjgeqev38CtAfjxO1p8cRYu74UdnU74JLDSwPuAl0nmBr36AtShacd342Aq+H4D37d3Fqc5XYTuR/BzxrmTkoHtPH8CWlsS7XsNPAJsjTN7PAL9hXRQ3+roJji5PdGnYGCLtNg8fKwfJsyigrGmHZ4cT3SYNLCFiwVY5Nh5G2bnJTv3CpoyMHwp0W5mQcDNWRiymhY/SuCGHfUosKURwZX4nKaKkFug59SIBHLAT5kfgbakaBgeh5sDUIxJJC1ZuFJJyjSYqlZUJEYn5orEogysWgabO6BrQ4VFwgNbU1ePsmgForNcFj14PRqBI37zF259eoEz7txUlUV06+Pt2jrM+jd7AXh929vgAXoN/b3/6MMsFZ9P3dCH4BbtF717T3znAb+v3hfmTlVfmNAC/E/b7sCnrdWzmQp82gaBQRFx9it/Ac3R8RalZ/prAAAAAElFTkSuQmCC"},"6a58":function(e,t,n){"use strict";n.r(t);n("a9e3");var a=n("7a23"),i=n("5e7e"),r=n.n(i),s=Object(a["withScopeId"])("data-v-660de2ca");Object(a["pushScopeId"])("data-v-660de2ca");var o={class:"container"},c={class:"notformed"},d={class:"top-block"},u={class:"left flex-item"},l={class:"title"},p={class:"value"},y={class:"right"},m={class:"btn-wrap",style:{margin:"0 0 0 10px"}},b={class:"lists"},f={class:"li"},v={class:"key"},O={class:"value flex-item"},g={class:"li"},j={class:"key"},w={class:"value flex-item"},x={class:"li"},k={class:"key"},T={class:"value flex-item"},h=Object(a["createVNode"])("div",{class:"li border-1px-b"},null,-1),A={class:"li"},N={class:"key"},V={class:"value flex-item"},S={class:"li"},C={class:"key"},F={class:"value flex-item"},M={class:"li"},D={class:"key"},I={class:"progress-wrap flex-item"},B={class:"out"},P=Object(a["createVNode"])("img",{class:"img",src:r.a,alt:""},null,-1),R={class:"text",style:{"min-width":"40px","margin-left":"10px","text-align":"right"}};Object(a["popScopeId"])();var E=s((function(e,t,n,i,r,E){var J=Object(a["resolveComponent"])("Header"),U=Object(a["resolveComponent"])("van-button");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])(J,{title:e.t("index.社區獎勵"),type:"back"},null,8,["title"]),Object(a["createVNode"])("div",c,[Object(a["createVNode"])("div",d,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",l,Object(a["toDisplayString"])(e.t("index.社區獎勵待領取")),1),Object(a["createVNode"])("div",p,Object(a["toDisplayString"])(e.earned)+" Back ",1)]),Object(a["createVNode"])("div",y,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])(U,{size:"mini",type:"primary",class:"btn","loading-text":e.$t("index.領取"),loading:e.btnRecive.loading,disabled:!Number(e.earned)||e.btnRecive.loading,onClick:t[1]||(t[1]=function(t){return e.reciveHandle()})},{default:s((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("index.領取")),1)]})),_:1},8,["loading-text","loading","disabled"])])])]),Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",v,Object(a["toDisplayString"])(e.t("index.開始時間")),1),Object(a["createVNode"])("div",O,Object(a["toDisplayString"])(e.datagetOrderInfo.time?e.$dateformat(e.datagetOrderInfo.time):e.t("index.暫未開放")),1)]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",j,Object(a["toDisplayString"])(e.t("index.縂鎖倉天數")),1),Object(a["createVNode"])("div",w,Object(a["toDisplayString"])(e.datagetOrderInfo.unlockPeriod)+Object(a["toDisplayString"])(e.t("index.天")),1)]),Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",k,Object(a["toDisplayString"])(e.t("index.剩餘天數")),1),Object(a["createVNode"])("div",T,Object(a["toDisplayString"])(e.datagetOrderInfo.surplusDay)+Object(a["toDisplayString"])(e.t("index.天")),1)]),h,Object(a["createVNode"])("div",A,[Object(a["createVNode"])("div",N,Object(a["toDisplayString"])(e.t("index.待釋放")),1),Object(a["createVNode"])("div",V,Object(a["toDisplayString"])(e.datagetOrderInfo.isWillRelease)+" Back",1)]),Object(a["createVNode"])("div",S,[Object(a["createVNode"])("div",C,Object(a["toDisplayString"])(e.t("index.已釋放")),1),Object(a["createVNode"])("div",F,Object(a["toDisplayString"])(e.datagetOrderInfo.receiveProfit)+" Back",1)]),Object(a["createVNode"])("div",M,[Object(a["createVNode"])("div",D,Object(a["toDisplayString"])(e.t("index.進度")),1),Object(a["createVNode"])("div",I,[Object(a["createVNode"])("div",B,[Object(a["createVNode"])("div",{class:"in",style:{width:e.datagetOrderInfo.progress}},[P],4)])]),Object(a["createVNode"])("div",R,Object(a["toDisplayString"])(e.datagetOrderInfo.progress),1)])])])])})),J=n("5530"),U=n("1da1"),K=(n("96cf"),n("b680"),n("0418")),W=n("47e2"),G=n("5502"),H=n("01ea"),X=n("722f"),z=n("cc24"),L=n("901e"),Q=n.n(L),Z=n("d399");Z["a"].allowMultiple();var q={components:{Header:K["a"]},setup:function(){var e=Object(a["getCurrentInstance"])(),t=e.proxy,n=Object(G["b"])(),i=Object(W["a"])(),r=i.t,s=Object(a["reactive"])({t:r,address:Object(a["computed"])((function(){return n.state.accounts[0]})),web3:Object(a["computed"])((function(){return n.state.provider})),communityContract:null,backContract:null,earned:"0.0000",btnRecive:{loading:!1},datagetOrderInfo:{user:"",profit:"--",receiveProfit:"--",time:"",unlockPeriod:"--",isWillRelease:"--",progress:"0",surplusDay:"--"},initContract:function(){s.backContract=new s.web3.eth.Contract(X,H["a"].backAddress),s.communityContract=new s.web3.eth.Contract(z,H["a"].community),s.initData()},initData:function(){s.userOrderFetch(),s.earnedGet()},earnedGet:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.backContract.methods.decimals().call();case 3:return n=e.sent,e.next=6,s.communityContract.methods.earned(s.address).call({from:s.address});case 6:a=e.sent,a=new Q.a(a).dividedBy(Math.pow(10,n)).toFixed(4),s.earned=a,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$errorformat(e.t0,119);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));function n(){return e.apply(this,arguments)}return n}(),reciveHandle:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.btnRecive.loading=!0,e.prev=1,e.next=4,s.communityContract.methods.takeProfit().estimateGas({from:s.address});case 4:return n=e.sent,e.next=8,s.communityContract.methods.takeProfit().send({gas:n+2e5,gasPrice:2e10,from:s.address});case 8:Object(Z["a"])(r("Success")),s.btnRecive.loading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),s.btnRecive.loading=!1,t.$errorformat(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));function n(){return e.apply(this,arguments)}return n}(),userOrderFetch:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Z["a"].loading({duration:0}),e.prev=1,e.next=4,s.communityContract.methods.userOrder(s.address).call({from:s.address});case 4:if(a=e.sent,Number(a)){e.next=10;break}e.next=13;break;case 10:return e.next=13,s.getOrderInfo(a);case 13:n.clear(),e.next=21;break;case 16:e.prev=16,e.t0=e["catch"](1),n.clear(),t.$errorformat(e.t0,159);case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));function n(){return e.apply(this,arguments)}return n}(),getOrderInfo:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(n){var a,i,r,o,c,d,u,l,p,y,m,b,f,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Z["a"].loading({duration:0}),e.prev=1,e.next=4,s.communityContract.methods.getOrderInfo(n).call({from:s.address});case 4:return i=e.sent,e.next=8,s.backContract.methods.decimals().call();case 8:return r=e.sent,e.next=11,s.communityContract.methods.unlockTime().call();case 11:o=e.sent,c=i.user,d=i.profit,u=i.receiveProfit,l=i.time,p=i.unlockPeriod,d=new Q.a(d).dividedBy(Math.pow(10,r)).toFixed(4),u=new Q.a(u).dividedBy(Math.pow(10,r)).toFixed(4),y=new Q.a(d).minus(u).minus(s.earned).toFixed(),m=new Q.a(u).plus(s.earned).dividedBy(d).multipliedBy(100).toFixed(),m+="%",b=Math.floor((new Date).getTime()/1e3),f=new Q.a(b).minus(l).toFixed(),f=new Q.a(f).dividedBy(o).toFixed(2),v=new Q.a(p).minus(f).toFixed(0),s.datagetOrderInfo={user:c,profit:d,receiveProfit:u,time:l,unlockPeriod:p,isWillRelease:y,progress:m,surplusDay:v},a.clear(),e.next=31;break;case 27:e.prev=27,e.t0=e["catch"](1),a.clear(),t.$errorformat(e.t0,210);case 31:case"end":return e.stop()}}),e,null,[[1,27]])})));function n(t){return e.apply(this,arguments)}return n}()});s.address&&s.initContract(),Object(a["watch"])((function(){return s.address}),(function(e){e&&s.initContract()}));var o=Object(a["toRefs"])(s);return Object(J["a"])({},o)}};n("2ff2"),n("9df6");q.render=E,q.__scopeId="data-v-660de2ca";t["default"]=q},"938c":function(e,t,n){},"9df6":function(e,t,n){"use strict";n("cf4b")},cc24:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"uint256","name":"unlockPeriod","type":"uint256"}],"name":"addUserOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"getToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_lock","type":"string"},{"internalType":"bool","name":"open","type":"bool"}],"name":"setLock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"setTokenAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_unlockTime","type":"uint256"}],"name":"setUnlockTime","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"takeProfit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"earned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"orderId","type":"uint256"}],"name":"getOrderInfo","outputs":[{"components":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"bool","name":"isExist","type":"bool"},{"internalType":"uint256","name":"receiveProfit","type":"uint256"},{"internalType":"uint256","name":"unlockPeriod","type":"uint256"}],"internalType":"struct Promotion.order","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"lock","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"orders","outputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"bool","name":"isExist","type":"bool"},{"internalType":"uint256","name":"receiveProfit","type":"uint256"},{"internalType":"uint256","name":"unlockPeriod","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"receivedProfit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalProfit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"unlockTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userOrder","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},cf4b:function(e,t,n){}}]);